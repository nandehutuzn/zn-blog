<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式学习 | 张宁-个人博客</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="前端、C#、算法、生活......">
    
    <link rel="preload" href="/assets/css/0.styles.65a9d785.css" as="style"><link rel="preload" href="/assets/js/app.73819cc8.js" as="script"><link rel="preload" href="/assets/js/2.1d157987.js" as="script"><link rel="preload" href="/assets/js/44.70e7a5c0.js" as="script"><link rel="prefetch" href="/assets/js/10.f7aa8c22.js"><link rel="prefetch" href="/assets/js/11.68be72b2.js"><link rel="prefetch" href="/assets/js/12.2f13c77f.js"><link rel="prefetch" href="/assets/js/13.60fe103f.js"><link rel="prefetch" href="/assets/js/14.c9ded3f6.js"><link rel="prefetch" href="/assets/js/15.c3556b29.js"><link rel="prefetch" href="/assets/js/16.8c54a7e1.js"><link rel="prefetch" href="/assets/js/17.0b820cc5.js"><link rel="prefetch" href="/assets/js/18.64ee49bc.js"><link rel="prefetch" href="/assets/js/19.f28019a2.js"><link rel="prefetch" href="/assets/js/20.d3231e89.js"><link rel="prefetch" href="/assets/js/21.4cef60ce.js"><link rel="prefetch" href="/assets/js/22.670c4a5a.js"><link rel="prefetch" href="/assets/js/23.ab4be979.js"><link rel="prefetch" href="/assets/js/24.59a6b942.js"><link rel="prefetch" href="/assets/js/25.483117e0.js"><link rel="prefetch" href="/assets/js/26.671a06b1.js"><link rel="prefetch" href="/assets/js/27.c3fc8241.js"><link rel="prefetch" href="/assets/js/28.4a9d0045.js"><link rel="prefetch" href="/assets/js/29.59e1c35b.js"><link rel="prefetch" href="/assets/js/3.4103b7e1.js"><link rel="prefetch" href="/assets/js/30.07b4c4e3.js"><link rel="prefetch" href="/assets/js/31.80ddf6b7.js"><link rel="prefetch" href="/assets/js/32.5ac36d6f.js"><link rel="prefetch" href="/assets/js/33.f906ce7a.js"><link rel="prefetch" href="/assets/js/34.ebd39fbe.js"><link rel="prefetch" href="/assets/js/35.cfdae827.js"><link rel="prefetch" href="/assets/js/36.1655e37e.js"><link rel="prefetch" href="/assets/js/37.625c187d.js"><link rel="prefetch" href="/assets/js/38.a7b0b0ff.js"><link rel="prefetch" href="/assets/js/39.40e33dba.js"><link rel="prefetch" href="/assets/js/4.c98340cf.js"><link rel="prefetch" href="/assets/js/40.5fc10627.js"><link rel="prefetch" href="/assets/js/41.fe32f84d.js"><link rel="prefetch" href="/assets/js/42.87fa8e79.js"><link rel="prefetch" href="/assets/js/43.55e09ac6.js"><link rel="prefetch" href="/assets/js/45.3259b240.js"><link rel="prefetch" href="/assets/js/46.1e92f698.js"><link rel="prefetch" href="/assets/js/47.329bf0e4.js"><link rel="prefetch" href="/assets/js/5.ab149363.js"><link rel="prefetch" href="/assets/js/6.dfa8bf1a.js"><link rel="prefetch" href="/assets/js/7.97018498.js"><link rel="prefetch" href="/assets/js/8.6a48e8a0.js"><link rel="prefetch" href="/assets/js/9.9443a568.js">
    <link rel="stylesheet" href="/assets/css/0.styles.65a9d785.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">张宁-个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/dotnet/" class="nav-link">
  .NET
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/nandehutuzn/zn-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/dotnet/" class="nav-link">
  .NET
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/life/" class="nav-link">
  生活
</a></div><div class="nav-item"><a href="https://github.com/nandehutuzn/zn-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>正则表达式学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/regex.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/regex.html#正则基础知识点" class="sidebar-link">正则基础知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/regex.html#元字符" class="sidebar-link">元字符</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#重复限定符" class="sidebar-link">重复限定符</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#分组" class="sidebar-link">分组</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#转义" class="sidebar-link">转义</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#条件或" class="sidebar-link">条件或</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#区间" class="sidebar-link">区间</a></li></ul></li><li><a href="/frontend/regex.html#正则进阶知识点" class="sidebar-link">正则进阶知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/regex.html#零宽断言" class="sidebar-link">零宽断言</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#贪婪和非贪婪" class="sidebar-link">贪婪和非贪婪</a></li><li class="sidebar-sub-header"><a href="/frontend/regex.html#反义" class="sidebar-link">反义</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="正则表达式学习"><a href="#正则表达式学习" class="header-anchor">#</a> 正则表达式学习</h1> <hr> <p><em>2020/11/22</em></p> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <div class="custom-block tip"><p><strong>正则表达式</strong>在前端的重要性无需多言，今天网上找了一篇得赞比较多的文章简单学习下正则表达式。</p></div> <h2 id="正则基础知识点"><a href="#正则基础知识点" class="header-anchor">#</a> 正则基础知识点</h2> <h3 id="元字符"><a href="#元字符" class="header-anchor">#</a> 元字符</h3> <div class="custom-block tip"><p><strong>元字符</strong> 是构造正则表达式的一种基本元素，常用的元字符有：</p> <table><thead><tr><th style="text-align:left;">元字符</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">.</td> <td style="text-align:left;">匹配除换行符以外的任意字符</td></tr> <tr><td style="text-align:left;">\w</td> <td style="text-align:left;">匹配字母或数字或下划线或汉字</td></tr> <tr><td style="text-align:left;">\s</td> <td style="text-align:left;">匹配任意的空白符</td></tr> <tr><td style="text-align:left;">\d</td> <td style="text-align:left;">匹配数字</td></tr> <tr><td style="text-align:left;">\b</td> <td style="text-align:left;">匹配单词的开始或结束</td></tr> <tr><td style="text-align:left;">^</td> <td style="text-align:left;">匹配字符串的开始</td></tr> <tr><td style="text-align:left;">$</td> <td style="text-align:left;">匹配字符串的结束</td></tr></tbody></table></div> <h3 id="重复限定符"><a href="#重复限定符" class="header-anchor">#</a> 重复限定符</h3> <div class="custom-block tip"><table><thead><tr><th style="text-align:left;">语法</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">*</td> <td style="text-align:left;">重复零次或更多次</td></tr> <tr><td style="text-align:left;">+</td> <td style="text-align:left;">重复一次或更多次</td></tr> <tr><td style="text-align:left;">?</td> <td style="text-align:left;">重复零次或一次</td></tr> <tr><td style="text-align:left;">{n}</td> <td style="text-align:left;">重复n次</td></tr> <tr><td style="text-align:left;">{n,}</td> <td style="text-align:left;">重复n次或更多次</td></tr> <tr><td style="text-align:left;">{n,m}</td> <td style="text-align:left;">重复n到m次</td></tr></tbody></table> <p>匹配1开头11位数字的手机号码</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code> <span class="token anchor function">^</span>1<span class="token charclass class-name">\d</span><span class="token quantifier number">{10}</span><span class="token anchor function">$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="分组"><a href="#分组" class="header-anchor">#</a> 分组</h3> <div class="custom-block tip"><p>如果想匹配以a开头的，0个或多个b结尾的字符串，写法如下:</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token anchor function">^</span>ab<span class="token quantifier number">*</span><span class="token anchor function">$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果想要ab同时被*限定呢？可以使用小括号。<strong>正则表达式中用小括号()来做分组，也就是括号中的内容作为一个整体。</strong> ，因此当要匹配多个ab时，可以这样：</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token anchor function">^</span><span class="token group punctuation">(</span>ab<span class="token group punctuation">)</span><span class="token quantifier number">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="转义"><a href="#转义" class="header-anchor">#</a> 转义</h3> <div class="custom-block tip"><p>我们看到正则表达式用小括号来做分组，那 <strong>如果要匹配的字符串中本身就包含小括号，那该怎么办</strong>，针对这种情况，正则提供了转义的方式，也就是把这些元字符、限定符或者关键字转义成普通的字符，做法很简单，就是在要转义的字符前面加个斜杠(\)即可。</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token anchor function">^</span><span class="token group punctuation">(</span><span class="token special-escape escape">\(</span>ab<span class="token special-escape escape">\)</span><span class="token group punctuation">)</span><span class="token quantifier number">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="条件或"><a href="#条件或" class="header-anchor">#</a> 条件或</h3> <div class="custom-block tip"><p>回到刚才的手机号匹配，我们都知道：国内号码都来自三大网，它们都有属于自己的号段，比如联通有 130/131/132/155/156/185/186/145/176等号段，假如让我们匹配一个联通的号码，那按照我们目前所学的正则，应该无从下手，因为这里包含了一些并列的条件，也就是“或”，那么在正则中是如何表示“或”的呢？</p> <p><strong>正则用户号 | 来表示或，也叫做分支条件，当满足正则里的分支条件的任何一种条件时，都会当成是匹配成功。</strong></p> <p>那么我们就可以用或条件来处理这个问题：</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token anchor function">^</span><span class="token group punctuation">(</span>130<span class="token alternation keyword">|</span>131<span class="token alternation keyword">|</span>132<span class="token alternation keyword">|</span>155<span class="token alternation keyword">|</span>156<span class="token alternation keyword">|</span>185<span class="token alternation keyword">|</span>186<span class="token alternation keyword">|</span>145<span class="token alternation keyword">|</span>176<span class="token group punctuation">)</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{8}</span><span class="token anchor function">$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="区间"><a href="#区间" class="header-anchor">#</a> 区间</h3> <div class="custom-block tip"><p>上面的例子，还可以用区间继续简化。</p> <p><strong>正则提供一个元字符中括号来表示区间条件。</strong></p> <ul><li>限定0到9可以写成 [0-9]</li> <li>限定A-Z写成 [A-Z]</li> <li>限定某些数字 [165]</li></ul> <p>上面的正则可以改成：</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token anchor function">^</span><span class="token group punctuation">(</span><span class="token group punctuation">(</span>13<span class="token charset"><span class="token charset-punctuation punctuation">[</span><span class="token range">0<span class="token range-punctuation operator">-</span>2</span><span class="token charset-punctuation punctuation">]</span></span><span class="token group punctuation">)</span><span class="token alternation keyword">|</span><span class="token group punctuation">(</span>15<span class="token charset"><span class="token charset-punctuation punctuation">[</span>56<span class="token charset-punctuation punctuation">]</span></span><span class="token group punctuation">)</span><span class="token alternation keyword">|</span><span class="token group punctuation">(</span>18<span class="token charset"><span class="token charset-punctuation punctuation">[</span><span class="token range">5<span class="token range-punctuation operator">-</span>6</span><span class="token charset-punctuation punctuation">]</span></span><span class="token group punctuation">)</span><span class="token alternation keyword">|</span>145<span class="token alternation keyword">|</span>176<span class="token group punctuation">)</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{8}</span><span class="token anchor function">$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h2 id="正则进阶知识点"><a href="#正则进阶知识点" class="header-anchor">#</a> 正则进阶知识点</h2> <h3 id="零宽断言"><a href="#零宽断言" class="header-anchor">#</a> 零宽断言</h3> <div class="custom-block tip"><p>无论是零宽还是断言，听起来都古古怪怪的，先解释下这两个词。</p> <p><strong>断言：</strong> 俗话的断言就是 &quot;我断定什么什么&quot;，而正则中的断言，就是说正则可以指明在指定的内容前面或后面会出现满足指定规则的内容，意思是正则也可以像人类那样断定什么什么，比如 &quot;ss1aa2bb3&quot;，正则可以用断言找出aa2前面有ss1，也可以找出aa2后面有bb3。</p> <p><strong>零宽：</strong> 也就是没有宽度，在正则中，断言只是匹配位置，不占字符，也就是说，匹配结果里是不会返回断言本身。</p> <p>听了还是糊里糊涂，举个例子吧</p> <p>假设我们要用爬虫取 csdn 里的文章阅读量。通过查看源代码可以看到文章阅读量这个内容是这样的结构：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>read-count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>阅读数：641<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中也就 '641' 这个是变量，也就是说不同文章不同的值，当我们拿到这个字符串时，需要获得里边的 '641' 有很多种办法，但是正则应该怎么匹配呢？</p> <p>下面先讲几种类型的断言。</p></div> <h4 id="正向先行断言-正前瞻"><a href="#正向先行断言-正前瞻" class="header-anchor">#</a> 正向先行断言(正前瞻)</h4> <div class="custom-block tip"><p><strong>语法：</strong> (?=pattern)
<strong>作用：</strong> 匹配pattern表达式的前面内容，不返回本身。</p> <p>回到刚才的例子，要取阅读量，在正则表达式中就意味着要能匹配到 <code>'&lt;/span&gt;'</code> 前面的数字内容。按照上所说的正向先行断言可以匹配表达式前面的内容，那意思就是: (?=&lt;/span&gt;) 就可以匹配到前面的内容了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'&lt;span class=&quot;read-count&quot;&gt;阅读数：641&lt;/span&gt;'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token charclass class-name">.</span><span class="token quantifier number">+</span><span class="token group punctuation">(?=</span>&lt;<span class="token escape">\/</span>span&gt;<span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">const</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// &lt;span class=&quot;read-count&quot;&gt;阅读数：641</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>我们只要阅读数 '641' ，那也简单，匹配数字 \d，那可以改成：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'&lt;span class=&quot;read-count&quot;&gt;阅读数：641&lt;/span&gt;'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token charclass class-name">\d</span><span class="token quantifier number">+</span><span class="token group punctuation">(?=</span>&lt;<span class="token escape">\/</span>span&gt;<span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">const</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 641</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <h4 id="正向后行断言-正后顾"><a href="#正向后行断言-正后顾" class="header-anchor">#</a> 正向后行断言(正后顾)</h4> <div class="custom-block tip"><p><strong>语法：</strong> (?&lt;=pattern)
<strong>作用：</strong> 匹配pattern表达式的后面的内容，不返回本身。</p> <p>有先行就有后行，先行是匹配前面的内容，那后行就是匹配后面的内容。</p> <p>上面的例子，我们也可以用后行断言来处理。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'&lt;span class=&quot;read-count&quot;&gt;阅读数：641&lt;/span&gt;'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token group punctuation">(?&lt;=</span><span class="token escape">\&lt;</span>span class=<span class="token escape">\&quot;</span>read-count<span class="token escape">\&quot;</span>&gt;阅读数：<span class="token group punctuation">)</span><span class="token charclass class-name">\d</span><span class="token quantifier number">+</span></span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">const</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 641</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <h4 id="负向先行断言-负前瞻"><a href="#负向先行断言-负前瞻" class="header-anchor">#</a> 负向先行断言(负前瞻)</h4> <div class="custom-block tip"><p><strong>语法：</strong> (?!pattern)
<strong>作用：</strong> 匹配非pattern表达式的前面的内容，不返回本身。</p> <p>有正向也有负向，负向在这里其实是非的意思。</p> <p>举个例子：比如有一句  &quot;我爱祖国, 我是祖国的花朵&quot;</p> <p>现在要找到不是 &quot;的花朵&quot; 前面的祖国，用正则就可以这样写：</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code>祖国<span class="token group punctuation">(?!</span>的花朵<span class="token group punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h4 id="负向后行断言-负后顾"><a href="#负向后行断言-负后顾" class="header-anchor">#</a> 负向后行断言(负后顾)</h4> <div class="custom-block tip"><p><strong>语法：</strong> (?&lt;!pattern)
<strong>作用：</strong> 匹配非pattern表达式的后面的内容，不返回本身。</p></div> <h3 id="贪婪和非贪婪"><a href="#贪婪和非贪婪" class="header-anchor">#</a> 贪婪和非贪婪</h3> <h4 id="贪婪"><a href="#贪婪" class="header-anchor">#</a> 贪婪</h4> <div class="custom-block tip"><p>我们都知道，贪婪是不满足，尽可能多的要，在正则中，贪婪也是差不多的意思：</p> <p><strong>贪婪匹配：</strong> 当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符，这匹配方式叫做贪婪匹配。</p> <p><strong>特性：</strong> 一次性读入整个字符串进行匹配，每当不匹配就舍弃最右边一个字符，继续匹配，依次匹配和舍弃（这种匹配-舍弃的方式也叫做回溯），直到匹配成功或者把整个字符串舍弃完为止，因此它是一种最大化的数据返回，能多不会少。</p> <p>前面我们讲过重复限定符，其实这些限定符就是贪婪量词，比如表达式：</p> <div class="language-regex line-numbers-mode"><pre class="language-regex"><code><span class="token charclass class-name">\d</span><span class="token quantifier number">{3,6}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用来匹配3到6位数字，在这种情况下，它是一种贪婪模式的匹配，也就是假如字符串里有6个数字可以匹配，那它就全部匹配到，如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'61762828 176 2991 44 871'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token charclass class-name">\d</span><span class="token quantifier number">{3,6}</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">let</span> res
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
617628
176   
2991  
871  
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>由结果可见：本来字符串中的 '61762828' 这一段，其实只需要出现3个(617) 就已经匹配成功了的，但是它并不满足，而是匹配到了最大能匹配的字符，也就是6个。</p> <p>如果多个贪婪量词凑在一起，那他们是如何支配自己的匹配权的呢？</p> <p>是这样的，多个贪婪在一起时，如果字符串能满足他们各自最大程度的匹配时，就互不干扰，但如果不能满足时，就会根据深度优先原则，也就是从左到右的每一个贪婪量词，优先最大数量的满足，剩余再分配下一个量词匹配。如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'61762828 176 2991 87321'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token group punctuation">(</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{1,2}</span><span class="token group punctuation">)</span><span class="token group punctuation">(</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{3,4}</span><span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">let</span> res
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
617628  前面 \d{1,2}匹配出了61，后面匹配出了 7628
2991    前面 \d{1,2}匹配出了2，后面匹配出了 991
87321   前面 \d{1,2}匹配出了97，后面匹配出了 321
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <h4 id="非贪婪"><a href="#非贪婪" class="header-anchor">#</a> 非贪婪</h4> <div class="custom-block tip"><p><strong>懒惰匹配：</strong> 当正则表达式中包含能接受重复的限定符时，通常的行为是（在屎整个表达式能得到匹配的前提下）匹配尽可能少的字符，这匹配 方式叫做懒惰匹配。</p> <p><strong>特性：</strong> 从左到右，从字符串的最左边开始匹配，每次视图不读入字符匹配，匹配成功，则完成匹配，否则读入一个字符再匹配，依次循环（读入字符、匹配）直到匹配成功或者把字符串的字符匹配完为止。</p> <p>懒惰量词是在贪婪量词后面加个 '?'</p> <table><thead><tr><th style="text-align:left;">代码</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">*?</td> <td style="text-align:left;">重复任意次，但尽可能少重复</td></tr> <tr><td style="text-align:left;">+?</td> <td style="text-align:left;">重复1次或更多次，但尽可能少重复</td></tr> <tr><td style="text-align:left;">??</td> <td style="text-align:left;">重复0次或1次，但尽可能少重复</td></tr> <tr><td style="text-align:left;">{n,m}?</td> <td style="text-align:left;">重复n到m次，但尽可能少重复</td></tr> <tr><td style="text-align:left;">{n,}?</td> <td style="text-align:left;">重复n次以上，但尽可能少重复</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'61762828 176 2991 87321'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token group punctuation">(</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{1,2}?</span><span class="token group punctuation">)</span><span class="token group punctuation">(</span><span class="token charclass class-name">\d</span><span class="token quantifier number">{3,4}</span><span class="token group punctuation">)</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">let</span> res
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
61762   左边的懒惰匹配出6，右边的贪婪匹配出1762
2991    左边的懒惰匹配出2，右边的贪婪匹配出991
87321   左边的懒惰匹配出8，右边的贪婪匹配出7321
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <h3 id="反义"><a href="#反义" class="header-anchor">#</a> 反义</h3> <div class="custom-block tip"><p>前面说到元字符的都是要匹配什么什么，当然如果想反着来，不想匹配某些字符，正则也提供了一些常用的反义元字符：</p> <table><thead><tr><th style="text-align:left;">元字符</th> <th style="text-align:left;">解释</th></tr></thead> <tbody><tr><td style="text-align:left;">\W</td> <td style="text-align:left;">匹配任意不是字母、数字、下划线、汉语的字符</td></tr> <tr><td style="text-align:left;">\S</td> <td style="text-align:left;">匹配任意不是空白符的字符</td></tr> <tr><td style="text-align:left;">\D</td> <td style="text-align:left;">匹配任意非数字的字符</td></tr> <tr><td style="text-align:left;">\B</td> <td style="text-align:left;">匹配不是单词开头或结尾的位置</td></tr> <tr><td style="text-align:left;">[^x]</td> <td style="text-align:left;">匹配除了x以外的任意字符</td></tr> <tr><td style="text-align:left;">[^aeiou]</td> <td style="text-align:left;">匹配除了aeiou 这几个字母以外的任意字符</td></tr></tbody></table></div> <div class="custom-block tip"><p><a href="https://www.zhihu.com/question/48219401" target="_blank" rel="noopener noreferrer">参考链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="/frontend">回首页</a></p></div> <p>（完）</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.73819cc8.js" defer></script><script src="/assets/js/2.1d157987.js" defer></script><script src="/assets/js/44.70e7a5c0.js" defer></script>
  </body>
</html>
