# 雅虎前端优化的35条军规
---
*2020/11/19*

## 前言

::: tip
  网页性能至关重要，网页性能优化也是一项任重道远的事，系统看看雅虎公司留下的前端优化35条军规。
:::

## 内容部分

::: tip
1. 尽量减少 `HTTP` 请求次数
  * 合并文件
  * CSS Sprites 图（可使用插件）
  * 行内图片（Base64编码） ---- 只针对小图标
2. 减少 `DNS` 查找
  * `DNS` 缓存，将组件分散在少数几个主机下 
3. 避免重定向
  * 重定向得重新进行 `DNS` 查找，`TCP` 握手等耗时操作
4. 让 `Ajax` 可缓存
  * 强缓存
  * 协商缓存
5. 延迟加载组件 ---- 只先加载必须的
6. 预加载组件
7. 减少 `DOM` 元素的数量
8. 跨域分离组件 ---- 最大化并行下载，但要确保不超过 **2-4** 个域
9. 尽量少使用 `iframe`
  * 优点
    * 引入缓慢的第三方内容，比如标志和广告
    * 安全沙箱
    * 并行下载脚本
  * 缺点
    * 代价高昂，即使是空白的 `iframe`
    * 阻塞页面加载
    * 非语义
10. 杜绝 `404`
:::

## CSS 部分

::: tip
11. 避免使用 `CSS` 表达式
12. 选择 `<link>` 舍弃 `@import`
13. 避免使用滤镜
14. 把样式表放在顶部
:::

## JS 部分

::: tip
15. 去除重复脚本
16. 尽量减少 `DOM` 访问
17. 用智能的事件处理器 ---- 冒泡
18. 把`js`脚本放在底部
:::

## JavaScript、CSS

::: tip
19. 把 `JavaScript` 和 `CSS` 放到外面 ---- 利用浏览器缓存
20. 压缩 `JavaScript` 和 `CSS`
:::


## 图片

::: tip
21. 优化图片，减小图片体积
22. 优化 `CSS Sprite`
23. 不要用 `HTML` 压缩图片 
  * 不要使用 `img` 标签的 `width` 和 `height` 属性限制图片尺寸，直接使用尺寸合适的图片
24. 用小的可缓存的 `favicon.ico`
:::

## Cookie

::: tip
25. 给 `Cookie` 减肥
26. 把组件放在不含 `Cookie` 的域下
:::

## 移动端

::: tip
27. 保证所有组件都小于 **25k** ---- **iPhone** 不能缓存大于 **25k** 的组件
28. 把组件打包到一个复合文档里
:::

## 服务器

::: tip
29. 压缩组件 `Gzip` 等
30. 避免图片 `src` 属性为空
31. 配置 `ETags`
32. 对 `Ajax` 用 `GET` 请求
33. 今早清空缓冲区
34. 使用 `CDN`
35. 添上 `Expires` 或者 `Cache-Control` HTTP 头


  [回首页](/frontend)
:::

（完）